<!-- I don't know if "turtlebot_navigate" is the right name for this file -->

<launch>
<!-- Begin boilerplate code -->
<arg name="lidar_port" default="/dev/ttyUSB1"/>
<arg name="use_controller" default="false" />
<group>
<remap from="scan" to="raw_scan"/>
<include file="$(find novel_bringup)/launch/include/turtlebot_common.launch">


<arg name="lidar_port" default="$(arg lidar_port)"/>
<arg name="use_controller" value="$(arg use_controller)" />


</include>
</group>
<!-- End boilerplate code -->


<group>
<arg name="map_file" value="$(find expected_scan_generator)/../maps/outside_B08C.yaml"/>
  <!-- <include file="$(find turtlebot_gazebo)/launch/amcl_demo.launch"> -->
  <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />
  <include file="$(find novel_bringup)/launch/include/novel_amcl.launch">
      <!--<arg name="map_file" value="$(find expected_scan_generator)/map_by_thomas.yaml"/>-->
      <!--<arg name="map_file" value="$(find expected_scan_generator)/../maps/outside_B08E.yaml"/>-->
      
    </include>

</group>

<node name="rviz" pkg="rviz" type="rviz" args="-d $(find expected_scan_generator)/rviz/view_laserscans.rviz"/>
<param name="min_angle" value="0"/>
<param name="max_angle" value="6.28319"/>
<param name="range" value="3.5"/>
<node pkg="expected_scan_generator" type="expected_scan_generator" name="expected_scan_node">
  
</node>
<node pkg="novel_lidar_detection" type="novel_lidar_detection" name="novel_lidar_detection">
  <param name="out_scan_topic" value="scan"/>
  <param name="in_scan_topic" value="raw_scan"/>
  <param name="threshold" value="0.05"/>
</node>
<!-- Spin up the real turtlebot --> 
<include file="$(find turtlebot_bringup)/launch/minimal.launch">
  <!--<arg name="serialport" value="usb-Silicon_Labs_CP2102_USB_to_UART_Bridge_Controller_0001-if00-port0" />-->
</include>
</launch>
